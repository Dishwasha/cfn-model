---
type: map
mapping:
  Type:
    type: str
    required: yes
    pattern: /AWS::EC2::Instance/
  Properties:
    type: map
    required: yes
    mapping:
      BlockDeviceMappings:
        type: seq
        required: no
        sequence:
          - type: map
            mapping:
              DeviceName:
                type: any
                required: yes
              =:
                type: any
      ImageId:
        type: any
        required: yes
      Ipv6Addresses:
        type:   seq
        required: no
        sequence:
          - type: map
            mapping:
              Ipv6Address:
                type: any
                required: yes
              =:
                type: any
      NetworkInterfaces:
        type:   seq
        required: no
        sequence:
          - type: map
            mapping:
              DeviceIndex:
                type: any
                required: yes
              GroupSet:
                type:   seq
                required: no
                sequence:
                  - type:   any
              Ipv6Addresses:
                type:   seq
                required: no
                sequence:
                  - type: map
                    mapping:
                      Ipv6Address:
                        type: any
                        required: yes
                      =:
                        type: any
              PrivateIpAddresses:
                type: seq
                required: no
                sequence:
                  - type: map
                    mapping:
                      PrivateIpAddress:
                        type: any
                        required: yes
                      Primary:
                        type: any
                        required: yes
                      =:
                        type: any
              =:
                type: any

      # sigh this could be List<AWS::EC2::SecurityGroup::Id> so can't enfore seq
      SecurityGroupIds:
        type:   any
        required: no

      # sigh this could be List<AWS::EC2::SecurityGroup::GroupName> so can't enfore seq
      SecurityGroups:
        type:   any
        required: no

      SsmAssociations:
        type:   seq
        required: no
        sequence:
          - type: map
            mapping:
              AssociationParameters:
                type:   seq
                required: no
                sequence:
                  - type: map
                    mapping:
                      Key:
                        type: any
                        required: yes
                      Value:
                        type: seq
                        required: yes
                        sequence:
                          - type: any
                      =:
                        type: any
              DocumentName:
                required: yes
                type: any

      Tags:
        type:   seq
        required: no
        sequence:
          - type: map
            mapping:
              Key:
                type: any
                required: yes
              Value:
                type: any
                required: yes
              =:
                type: any
      Volumes:
        type:   seq
        required: no
        sequence:
          - type: map
            mapping:
              Device:
                type: any
                required: yes
              VolumeId:
                type: any
                required: yes
              =:
                type: any
      =:
        type: any
  =:
    type: any